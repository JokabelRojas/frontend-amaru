<div class="p-6 bg-white rounded-2xl shadow-2xl border border-gray-200 relative max-h-[85vh] overflow-y-auto custom-scroll">
  <button (click)="cerrarModal()" class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 transition-all">
    <mat-icon>close</mat-icon>
  </button>

  <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
    <mat-icon class="text-[#F7A428]">school</mat-icon>
    {{ modoEdicion ? 'Editar Taller' : 'Nuevo Taller' }}
  </h2>

  <form (ngSubmit)="guardarTaller()" #tallerForm="ngForm" class="space-y-4">

    <!-- üü† Nombre -->
    <div>
      <label for="nombre" class="block text-sm font-medium text-gray-700">Nombre</label>
      <input
        type="text"
        id="nombre"
        name="nombre"
        [(ngModel)]="nuevoTaller.nombre"
        required
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-[#F7A428] focus:ring focus:ring-[#F7A428]/50 p-2"
      />
    </div>

    <!-- üü† Descripci√≥n -->
    <div>
      <label for="descripcion" class="block text-sm font-medium text-gray-700">Descripci√≥n</label>
      <textarea
        id="descripcion"
        name="descripcion"
        [(ngModel)]="nuevoTaller.descripcion"
        rows="3"
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-[#F7A428] focus:ring focus:ring-[#F7A428]/50 p-2 resize-none"
      ></textarea>
    </div>

    <!-- üü† Fecha Inicio / Fin -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label for="fecha_inicio" class="block text-sm font-medium text-gray-700">Fecha Inicio</label>
        <input
          type="datetime-local"
          id="fecha_inicio"
          name="fecha_inicio"
          [(ngModel)]="nuevoTaller.fecha_inicio"
          required
          class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-[#F7A428] focus:ring focus:ring-[#F7A428]/50 p-2"
        />
      </div>
      <div>
        <label for="fecha_fin" class="block text-sm font-medium text-gray-700">Fecha Fin</label>
        <input
          type="datetime-local"
          id="fecha_fin"
          name="fecha_fin"
          [(ngModel)]="nuevoTaller.fecha_fin"
          required
          class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-[#F7A428] focus:ring focus:ring-[#F7A428]/50 p-2"
        />
      </div>
    </div>

    <!-- üïì Horario -->
    <div>
      <label for="horario" class="block text-sm font-medium text-gray-700">Horario</label>
      <input
        type="text"
        id="horario"
        name="horario"
        placeholder="Ej: 10:00 - 12:00"
        [(ngModel)]="nuevoTaller.horario"
        required
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-[#F7A428] focus:ring focus:ring-[#F7A428]/50 p-2"
      />
    </div>

    <!-- üß≠ Modalidad -->
    <div>
      <label for="modalidad" class="block text-sm font-medium text-gray-700">Modalidad</label>
      <select
        id="modalidad"
        name="modalidad"
        [(ngModel)]="nuevoTaller.modalidad"
        required
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-[#F7A428] focus:ring focus:ring-[#F7A428]/50 p-2 bg-white"
      >
        <option value="">Seleccione una modalidad</option>
        <option value="presencial">Presencial</option>
        <option value="virtual">Virtual</option>
      </select>
    </div>

    <!-- ‚è± Duraci√≥n / Precio / Cupo -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div>
        <label for="duracion" class="block text-sm font-medium text-gray-700">Duraci√≥n (horas)</label>
        <input
          type="number"
          id="duracion"
          name="duracion"
          [(ngModel)]="nuevoTaller.duracion"
          required
          min="1"
          class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-[#F7A428] focus:ring focus:ring-[#F7A428]/50 p-2"
        />
      </div>
      <div>
        <label for="precio" class="block text-sm font-medium text-gray-700">Precio ($)</label>
        <input
          type="number"
          id="precio"
          name="precio"
          [(ngModel)]="nuevoTaller.precio"
          required
          class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-[#F7A428] focus:ring focus:ring-[#F7A428]/50 p-2"
        />
      </div>
      <div>
        <label for="cupo_total" class="block text-sm font-medium text-gray-700">Cupo Total</label>
        <input
          type="number"
          id="cupo_total"
          name="cupo_total"
          [(ngModel)]="nuevoTaller.cupo_total"
          required
          class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-[#F7A428] focus:ring focus:ring-[#F7A428]/50 p-2"
        />
      </div>
      
    </div>

    <!-- üü¢ Categor√≠a -->
    <div>
      <label for="categoria" class="block text-sm font-medium text-gray-700">Categor√≠a</label>
      <select
        id="categoria"
        name="categoria"
        [(ngModel)]="nuevoTaller.id_categoria"
        (change)="cargarSubcategorias()"
        required
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-[#F7A428] focus:ring focus:ring-[#F7A428]/50 p-2 bg-white"
      >
        <option value="">Seleccione una categor√≠a</option>
        <option *ngFor="let cat of categorias" [value]="cat._id">{{ cat.nombre }}</option>
      </select>
    </div>

    <!-- üü¢ Subcategor√≠a -->
    <div>
      <label for="subcategoria" class="block text-sm font-medium text-gray-700">Subcategor√≠a</label>
      <select
        id="subcategoria"
        name="subcategoria"
        [(ngModel)]="nuevoTaller.id_subcategoria"
        required
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-[#F7A428] focus:ring focus:ring-[#F7A428]/50 p-2 bg-white"
      >
        <option value="">Seleccione una subcategor√≠a</option>
        <option *ngFor="let sub of subcategorias" [value]="sub._id">{{ sub.nombre }}</option>
      </select>
    </div>

    <!-- üñº Imagen -->
    <div>
      <label for="imagen_url" class="block text-sm font-medium text-gray-700">Imagen (URL)</label>
      <input
        type="url"
        id="imagen_url"
        name="imagen_url"
        [(ngModel)]="nuevoTaller.imagen_url"
        placeholder="https://ejemplo.com/imagen.jpg"
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-[#F7A428] focus:ring focus:ring-[#F7A428]/50 p-2"
      />
    </div>

    <!-- Botones -->
    <div class="flex justify-end gap-3 pt-4">
      <button
        type="button"
        (click)="cerrarModal()"
        class="px-5 py-2 rounded-xl font-semibold border border-gray-300 text-gray-700 hover:bg-gray-100 transition-all"
      >
        Cancelar
      </button>

      <button
        type="submit"
        [disabled]="!tallerForm.valid"
        class="px-5 py-2 rounded-xl font-semibold bg-[#F7A428] text-white hover:bg-[#e69320] shadow-md transition-all disabled:opacity-60 disabled:cursor-not-allowed"
      >
        <mat-icon class="text-white align-middle mr-1">save</mat-icon>
        {{ modoEdicion ? 'Guardar Cambios' : 'Guardar' }}
      </button>
    </div>
  </form>
</div>
